<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAINS - ê³ ë ¤ëŒ€í•™êµ ìŠ¤í¬ì¸  í†µê³„ë¶„ì„ ë™ì•„ë¦¬</title>
    <style>
        /* ============================ */
        /* [1] í°íŠ¸ ë° ê¸°ë³¸ ì„¤ì •        */
        /* ============================ */
        @font-face {
            font-family: 'KBO_Dia';
            src: url('KBO_medium.woff') format('woff');
            font-weight: normal; font-style: normal;
        }
        @font-face {
            font-family: 'SCDream';
            src: url('SCDream5.otf');
            font-weight: normal; font-style: normal;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'SCDream', sans-serif; line-height: 1.6; color: #333; }
        h1, h3 { font-family: 'KBO_Dia', sans-serif; }

        /* ============================ */
        /* [2] ë ˆì´ì•„ì›ƒ ë° í—¤ë” (ìˆ˜ì •ë¨) */
        /* ============================ */
        header { 
            background-color: #cf8b8b; 
            color: white; 
            padding: 1rem 2rem; 
            display: flex; 
            align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
            gap: 20px; /* í–„ë²„ê±° ë²„íŠ¼ê³¼ ë¡œê³  ì‚¬ì´ ê°„ê²© */
            position: relative;
            z-index: 1000;
        }
        
        /* í–„ë²„ê±° ë²„íŠ¼ ìŠ¤íƒ€ì¼ (New) */
        .hamburger-btn {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 24px;
            height: 18px;
            cursor: pointer;
            z-index: 1100;
        }
        .hamburger-btn span {
            display: block;
            width: 100%;
            height: 2px;
            background-color: white;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        /* í—¤ë” í…ìŠ¤íŠ¸ ë§í¬ ìŠ¤íƒ€ì¼ */
        header h1 { font-size: 1.5rem; font-weight: bold; margin: 0; }
        header h1 a { text-decoration: none; color: white; }

        /* ê¸°ì¡´ ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ìˆ¨ê¹€ */
        header nav { display: none; }

        /* ============================ */
        /* [3] ì‚¬ì´ë“œë°” (New)           */
        /* ============================ */
        .sidebar {
            position: fixed;
            top: 0;
            left: -300px; /* í™”ë©´ ë°–ìœ¼ë¡œ ìˆ¨ê¹€ */
            width: 260px;
            height: 100vh;
            background-color: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            transition: left 0.3s ease;
            z-index: 1050;
            padding-top: 80px; /* í—¤ë” ë†’ì´ë§Œí¼ ë„ì›€ */
            display: flex;
            flex-direction: column;
        }
        .sidebar.active {
            left: 0; /* í™”ë©´ ì•ˆìœ¼ë¡œ ì§„ì… */
        }

        .sidebar a {
            padding: 15px 30px;
            text-decoration: none;
            color: #333;
            font-size: 1.1rem;
            font-weight: 500;
            border-bottom: 1px solid #f9f9f9;
            transition: background 0.2s, color 0.2s;
        }
        .sidebar a:hover {
            background-color: #fafafa;
            color: #ab3333;
            font-weight: bold;
        }

        /* ë°°ê²½ ì–´ë‘¡ê²Œ ì²˜ë¦¬ (Overlay) */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: none;
            z-index: 1040;
        }
        .overlay.active {
            display: block;
        }

        /* ============================ */
        /* [4] ê¸°ì¡´ ì„¹ì…˜ ìŠ¤íƒ€ì¼ ìœ ì§€     */
        /* ============================ */
        .hero { background-color: #ab3333; color: white; text-align: center; padding: 4rem 1rem; }
        .hero-image { max-width: 80%; width: 400px; height: auto; margin-bottom: 20px; border-radius: 12px; }
        .hero p { font-size: 1.2rem; opacity: 0.9; }

        section { padding: 3rem 2rem; max-width: 1000px; margin: 0 auto; }
        h3 { font-size: 1.8rem; color: #2c3e50; margin-bottom: 1.5rem; border-bottom: 2px solid #eee; padding-bottom: 10px; }

        /* ì¹´ë“œ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .activities { display: flex; gap: 20px; flex-wrap: wrap; }
        .card { flex: 1; background: #f9f9f9; padding: 25px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); min-width: 280px; position: relative; border: 2px solid transparent; }
        
        /* ì¹´ë“œ í—¤ë” */
        .card-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;
        }
        .card h4 { color: #ab3333; font-size: 1.2rem; font-weight: bold; margin: 0; }
        .d-day-text { font-family: 'KBO_Dia', sans-serif; color: #000; font-size: 1.2rem; font-weight: bold; }

        /* ì¼ì • ì „ìš© ìŠ¤íƒ€ì¼ */
        .schedule-content { text-align: left; margin-top: 10px; }
        .event-name { font-size: 1.3rem; font-weight: bold; margin-bottom: 8px; display: block; word-break: keep-all; }
        
        /* D-DAY ê°•ì¡° */
        .d-day-border {
            border: 3px solid #ab3333 !important; background-color: #fff5f5 !important; animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(171, 51, 51, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(171, 51, 51, 0); }
            100% { box-shadow: 0 0 0 0 rgba(171, 51, 51, 0); }
        }

        /* ë°°ì§€ ìŠ¤íƒ€ì¼ */
        .badge { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; color: white; margin-bottom: 8px; }
        .badge.regular { background-color: #27ae60; }
        .badge.irregular { background-color: #e67e22; }
        .badge.etc { background-color: #7f8c8d; }

        /* ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .schedule-detail { list-style: none; padding: 0; }
        .schedule-detail li { margin-bottom: 5px; font-size: 0.95rem; color: #555; }
        .schedule-detail strong { color: #333; margin-right: 5px; }

        /* í‘¸í„° ìŠ¤íƒ€ì¼ */
        footer { background-color: #333; color: white; text-align: center; padding: 3rem 2rem 2rem; margin-top: 2rem; font-size: 0.8rem; }
        .footer-icons { display: flex; justify-content: center; gap: 20px; margin-bottom: 25px; }
        .icon-btn { display: flex; justify-content: center; align-items: center; width: 50px; height: 50px; background-color: rgba(255,255,255,0.1); border-radius: 12px; transition: all 0.3s ease; }
        .icon-btn:hover { background-color: #ab3333; transform: translateY(-3px); }
        .icon-btn img { width: 24px; height: 24px; object-fit: contain; }

        @media (max-width: 600px) {
            .hero { padding: 3rem 1rem; }
            .activities { flex-direction: column; }
            /* ëª¨ë°”ì¼ì—ì„œë„ í—¤ë” ë ˆì´ì•„ì›ƒ ìœ ì§€ */
            header { justify-content: flex-start; } 
        }

        /* ============================ */
        /* [íŒì—…] ìŠ¤íƒ€ì¼ ìœ ì§€            */
        /* ============================ */
        .popup-overlay {
            display: none; 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            justify-content: center; align-items: center;
        }
        .popup-content {
            background: white; width: 400px; max-width: 90%;
            border-radius: 12px; overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            text-align: center;
        }
        .popup-img-box { width: 100%; background-color: #fff; }
        .popup-img-box img { width: 100%; height: auto; display: block; }
        .popup-footer { display: flex; border-top: 1px solid #eee; }
        .popup-btn {
            flex: 1; padding: 15px; border: none; background: white; cursor: pointer;
            font-family: 'SCDream', sans-serif; font-size: 0.95rem; transition: background 0.2s;
        }
        .popup-btn:hover { background-color: #f5f5f5; }
        .btn-today { border-right: 1px solid #eee; color: #666; }
        .btn-close { color: #ab3333; font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <div class="hamburger-btn" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <h1><a href="index.html">Providing Academic INsights for Sports.</a></h1>
    </header>

    <div class="sidebar" id="sidebar">
        <a href="index.html">Home</a>
        <a href="members.html">Members</a>
        <a href="result.html">Result</a>
        <a href="apply.html">Apply</a>
    </div>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <div class="hero">
        <img src="PAINS_logo.png" alt="PAINS ë©”ì¸ ë¡œê³ " class="hero-image">
        <p>ê³ ë ¤ëŒ€í•™êµ êµë‚´ ìœ ì¼ ìŠ¤í¬ì¸  í†µê³„ë¶„ì„ ë™ì•„ë¦¬ PAINS</p>
    </div>

    <section>
        <h3>President's Message</h3>
        <p>
            ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ, ê³ ë ¤ëŒ€í•™êµ ìŠ¤í¬ì¸  í†µê³„ë¶„ì„ ë™ì•„ë¦¬ PAINSì˜ íšŒì¥ ì‹ ë‹¤ì •ì…ë‹ˆë‹¤.<br><br>
            ê°ì‚¬í•©ë‹ˆë‹¤.
        </p>
    </section>

    <section>
        <h3>Schedule</h3>
        <div class="activities">
            <div class="card" id="card-left">
                <div class="card-header">
                    <h4 id="title-left">Loading...</h4>
                </div>
                
                <div class="schedule-content">
                    <span id="badge-left" class="badge etc">TBD</span>
                    <span id="name-left" class="event-name">ì¼ì • ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</span>
                    <ul class="schedule-detail">
                        <li><strong>ğŸ“… ì¼ì‹œ:</strong> <span id="date-left">TBD</span></li>
                        <li><strong>â° ì‹œê°:</strong> <span id="time-left">TBD</span></li>
                        <li><strong>ğŸ“ ì¥ì†Œ:</strong> <span id="loc-left">TBD</span></li>
                    </ul>
                </div>
            </div>

            <div class="card" id="card-right">
                <div class="card-header">
                    <h4 id="title-right">â© Upcoming Event</h4>
                    <span id="d-day-right" class="d-day-text"></span>
                </div>

                <div class="schedule-content">
                    <span id="badge-right" class="badge etc">TBD</span>
                    <span id="name-right" class="event-name">ì˜ˆì •ëœ ë‹¤ìŒ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</span>
                    <ul class="schedule-detail">
                        <li><strong>ğŸ“… ì¼ì‹œ:</strong> <span id="date-right">TBD</span></li>
                        <li><strong>â° ì‹œê°:</strong> <span id="time-right">TBD</span></li>
                        <li><strong>ğŸ“ ì¥ì†Œ:</strong> <span id="loc-right">TBD</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section>
        <h3>About Us</h3>
        <p>
            2020ë…„ ì„¤ë¦½ë˜ì–´ 2026ë…„ ì „ë°˜ê¸° 11ê¸°ë¡œ í™œë™í•˜ëŠ” PAINSëŠ” ìŠ¤í¬ì¸  í†µê³„ë¥¼ ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒë“¤ì´ ëª¨ì´ëŠ” ê³³ì…ë‹ˆë‹¤.
            ì „ê³µì— ìƒê´€ì—†ì´ í†µê³„ ì§€ì‹ê³¼ ìŠ¤í¬ì¸ ì— ëŒ€í•œ ì—´ì •ë§Œ ìˆë‹¤ë©´ ëˆ„êµ¬ë“  í™˜ì˜í•©ë‹ˆë‹¤!
        </p>
    </section>

    <section>
        <h3>Our Activities</h3>
        <div class="activities">
            <div class="card">
                <h4>ğŸ“š ì •ê¸° ìŠ¤í„°ë””</h4>
                <p>ì§€ì›ìë“¤ì„ ëŒ€ìƒìœ¼ë¡œ ê´€ì‹¬ ë¶„ì•¼ë³„ ì‹¬ë„ ìˆëŠ” ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.</p>
            </div>
            <div class="card">
                <h4>ğŸ¤ í”„ë¡œì íŠ¸</h4>
                <p>ë°°ìš´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ í•™ê¸° ì¤‘, ë°©í•™ ì¤‘ì— í•œ ë²ˆì”© ì •ê¸° íŒ€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ì‹¤ì „ ê²½í—˜ì„ ìŒ“ìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="card">
                <h4>ğŸ‰ ì¹œëª© í™œë™</h4>
                <p>ì„ í›„ë°° ë° ë¶€ì› ê°„ êµë¥˜ í™œë™. MT, ì†¡ë…„íšŒ ë“± ë‹¤ì–‘í•œ ì¹œëª© í™œë™ì„ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-icons">
            <a href="https://www.instagram.com/ku_pains" target="_blank" class="icon-btn" title="Instagram">
                <img src="instagram.png" alt="Instagram">
            </a>
            <a href="https://www.notion.so/painsports/PAINS-a9294ba2a44b4ea6a53f0d5ae069749e" target="_blank" class="icon-btn" title="Notion">
                <img src="notion.png" alt="Notion">
            </a>
            <a href="https://blog.naver.com/painsports" target="_blank" class="icon-btn" title="Blog">
                <img src="naver_blog.png" alt="NaverBlog">
            </a>
        </div>
        <p>&copy; 2026 PAINS. All rights reserved.</p>
    </footer>

    <div id="img-popup" class="popup-overlay">
        <div class="popup-content">
            <div class="popup-img-box">
                <img src="2026 HAPPY NEW YEAR.png" alt="2026 ìƒˆí•´ ë³µ ë§ì´ ë°›ìœ¼ì„¸ìš”">
            </div>
            <div class="popup-footer">
                <button class="popup-btn btn-today" onclick="closePopupToday()">ì˜¤ëŠ˜ í•˜ë£¨ ì•ˆ ë³´ê¸°</button>
                <button class="popup-btn btn-close" onclick="closePopup()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // [New] ì‚¬ì´ë“œë°” í† ê¸€ ê¸°ëŠ¥
        // ============================================
        function toggleMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // ============================================
        // [ê¸°ì¡´ ì½”ë“œ] íŒì—… ì œì–´ ë¡œì§
        // ============================================
        document.addEventListener("DOMContentLoaded", function() {
            const popup = document.getElementById('img-popup');
            const hideDate = localStorage.getItem('pains_popup_hide_date');
            const today = new Date().toDateString();

            if (hideDate !== today) {
                popup.style.display = "flex";
            }
        });

        function closePopup() {
            document.getElementById('img-popup').style.display = "none";
        }

        function closePopupToday() {
            localStorage.setItem('pains_popup_hide_date', new Date().toDateString());
            closePopup();
        }

        // ============================================
        // [ê¸°ì¡´ ì½”ë“œ] êµ¬ê¸€ ì‹œíŠ¸ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        // ============================================
        const GOOGLESHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRBnuUvyE2CDV-hG26xCVdnt88JhQgtusdEndJwTzaI62TXPdWTNldVvua9RLkXj1s34qiM0CEcNvbr/pub?gid=305458048&single=true&output=csv";

        async function fetchAndRenderSchedule() {
            try {
                const response = await fetch(GOOGLESHEET_URL);
                const data = await response.text();
                
                const rows = data.split("\n").map(row => row.trim()).filter(row => row.length > 0);
                
                const eventList = rows.slice(1).map(row => {
                    const cols = row.split(",");
                    if (cols.length < 5) return null;

                    return {
                        name: cols[0].trim(),     // Aì—´
                        date: cols[1].trim(),     // Bì—´
                        time: cols[2].trim(),     // Cì—´
                        location: cols[3].trim(), // Dì—´
                        type: cols[4].trim()      // Eì—´
                    };
                }).filter(event => event !== null); 

                updateSchedule(eventList);

            } catch (error) {
                console.error("ì¼ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
                document.getElementById('name-left').innerText = "ì¼ì • ë¡œë”© ì‹¤íŒ¨";
                document.getElementById('name-right').innerText = "ì¼ì • ë¡œë”© ì‹¤íŒ¨";
            }
        }

        function getFormattedDate(dateStr) {
            const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            if (!dateStr || !dateStr.includes('-')) return dateStr;
            const [y, m, d] = dateStr.split('-').map(Number);
            const date = new Date(y, m - 1, d); 
            const dayName = days[date.getDay()];
            return `${y}. ${String(m).padStart(2,'0')}. ${String(d).padStart(2,'0')}. (${dayName})`;
        }

        function updateSchedule(eventList) {
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const kstOffset = 9 * 60 * 60 * 1000;
            const kstDate = new Date(utc + kstOffset);
            
            const todayDateObj = new Date(kstDate.getFullYear(), kstDate.getMonth(), kstDate.getDate());
            const todayStr = kstDate.toISOString().split('T')[0];

            let todayEvent = null;
            let pastEvents = [];
            let futureEvents = [];

            eventList.forEach(event => {
                if(!event.date || event.date.length !== 10) return;
                if (event.date === todayStr) {
                    todayEvent = event;
                } else if (event.date < todayStr) {
                    pastEvents.push(event);
                } else {
                    futureEvents.push(event);
                }
            });

            pastEvents.sort((a, b) => new Date(b.date) - new Date(a.date));
            futureEvents.sort((a, b) => new Date(a.date) - new Date(b.date));

            const leftCard = document.getElementById('card-left');
            const leftTitle = document.getElementById('title-left');
            
            if (todayEvent) {
                leftTitle.innerText = "ğŸ”¥D-DAY";
                leftCard.classList.add('d-day-border');
                renderCard('left', todayEvent);
            } else {
                leftTitle.innerText = "âª Previous Event";
                leftCard.classList.remove('d-day-border');
                if (pastEvents.length > 0) {
                    renderCard('left', pastEvents[0]);
                } else {
                    renderEmpty('left');
                }
            }

            const rightCard = document.getElementById('card-right');
            const dDayEl = document.getElementById('d-day-right');
            rightCard.classList.remove('d-day-border');

            if (futureEvents.length > 0) {
                const nextEvent = futureEvents[0];
                const [ny, nm, nd] = nextEvent.date.split('-').map(Number);
                const nextEventDateObj = new Date(ny, nm - 1, nd);
                const diffTime = nextEventDateObj - todayDateObj;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                dDayEl.innerText = `D-${diffDays}`;
                renderCard('right', nextEvent);
            } else {
                dDayEl.innerText = "";
                renderEmpty('right');
            }
        }

        function renderCard(side, event) {
            const badgeEl = document.getElementById(`badge-${side}`);
            const type = event.type || "ê¸°íƒ€";
            badgeEl.innerText = type;
            badgeEl.className = 'badge';
            
            if (type.includes('ë¹„ì •ê¸°')) badgeEl.classList.add('irregular'); 
            else if (type.includes('ì •ê¸°')) badgeEl.classList.add('regular');
            else badgeEl.classList.add('etc');

            document.getElementById(`name-${side}`).innerText = event.name || "TBD";
            document.getElementById(`date-${side}`).innerText = getFormattedDate(event.date);
            document.getElementById(`time-${side}`).innerText = event.time || "TBD";
            document.getElementById(`loc-${side}`).innerText = event.location || "TBD";
        }
        function renderEmpty(side) {
            document.getElementById(`badge-${side}`).className = 'badge etc';
            document.getElementById(`badge-${side}`).innerText = 'TBD';
            document.getElementById(`name-${side}`).innerText = 'ì¼ì • ì—†ìŒ';
            document.getElementById(`date-${side}`).innerText = '-';
            document.getElementById(`time-${side}`).innerText = '-';
            document.getElementById(`loc-${side}`).innerText = '-';
        }

        fetchAndRenderSchedule();
    </script>

</body>
</html>
